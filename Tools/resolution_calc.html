<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resolution Calculator - 精度估算</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
  <style>
    /* ===== 赛博朋克主题样式 (内联) ===== */
    :root {
      --primary: #ff00ff; /* 使用洋红色区分 */
      --secondary: #00f0ff;
      --bg-dark: #0a0a1a;
      --card-bg: rgba(15, 25, 50, 0.85);
      --text: #e0e0e0;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .grid-bg {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: linear-gradient(rgba(255, 0, 255, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 0, 255, 0.1) 1px, transparent 1px);
      background-size: 40px 40px;
      z-index: -1;
    }
    .scan-line {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 2px;
      background: var(--primary);
      opacity: 0.3;
      animation: scan 4s linear infinite;
      z-index: -1;
    }
    @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

    /* 卡片容器 */
    .calc-container {
      background: var(--card-bg);
      border: 1px solid rgba(255, 0, 255, 0.3);
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.8), 0 0 10px rgba(255, 0, 255, 0.1);
      width: 100%;
      max-width: 500px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    /* 头部 */
    .header {
      padding: 20px 25px;
      background: linear-gradient(90deg, rgba(255,0,255,0.1), transparent);
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .back-btn {
      color: var(--text);
      text-decoration: none;
      font-size: 0.9rem;
      transition: 0.3s;
    }
    .back-btn:hover { color: var(--primary); }

    /* 表单 */
    .form-body { padding: 30px 25px; }
    .form-label { color: rgba(255,255,255,0.7); font-size: 0.9rem; }
    
    .form-control {
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      border-radius: 8px;
    }
    .form-control:focus {
      background: rgba(0,0,0,0.6);
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(255, 0, 255, 0.2);
      color: #fff;
    }

    /* 结果显示 */
    .result-box {
      margin-top: 25px;
      background: rgba(255, 0, 255, 0.05); /* 洋红色背景 */
      border: 1px dashed var(--primary);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    .result-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      text-shadow: 0 0 15px var(--primary);
      font-family: 'Courier New', monospace;
    }

    /* 语言切换器 */
    .lang-switch {
      cursor: pointer;
      font-size: 0.85rem;
      padding: 4px 10px;
      border: 1px solid var(--text);
      border-radius: 20px;
      color: var(--text);
      transition: 0.3s;
    }
    .lang-switch:hover { background: var(--text); color: #000; }
  </style>
</head>
<body>
  <div class="grid-bg"></div>
  <div class="scan-line"></div>

  <div class="calc-container">
    <!-- Header -->
    <div class="header">
      <div>
        <h5 class="m-0 fw-bold"><i class="fa-solid fa-ruler-combined me-2"></i><span data-i18n="title">精度/分辨率估算</span></h5>
        <small class="text-muted" data-i18n="subtitle">Precision Estimator</small>
      </div>
      <div class="d-flex align-items-center gap-3">
        <span class="lang-switch" onclick="toggleLang()" id="langBtn">EN</span>
        <a href="../tools.html" class="back-btn"><i class="fa-solid fa-xmark fa-lg"></i></a>
      </div>
    </div>

    <!-- Body -->
    <div class="form-body">
      
      <!-- FOV -->
      <div class="mb-3">
        <label class="form-label" data-i18n="label_fov">视野宽度 (FOV Width)</label>
        <div class="input-group">
          <input type="number" id="fov" class="form-control" placeholder="100" value="100" oninput="calculate()">
          <span class="input-group-text bg-secondary border-secondary bg-opacity-25 text-white">mm</span>
        </div>
      </div>

      <!-- Image Width -->
      <div class="mb-3">
        <label class="form-label" data-i18n="label_px">图像像素宽度 (Image Width in Pixels)</label>
        <div class="input-group">
          <input type="number" id="px" class="form-control" placeholder="2448" value="2448" oninput="calculate()">
          <span class="input-group-text bg-secondary border-secondary bg-opacity-25 text-white">px</span>
        </div>
        <div class="text-end mt-1">
            <small class="text-muted clickable" style="cursor:pointer;" onclick="setPreset(1280)">1.3MP</small>
            <small class="text-muted mx-1">|</small>
            <small class="text-muted clickable" style="cursor:pointer;" onclick="setPreset(2448)">5MP</small>
            <small class="text-muted mx-1">|</small>
            <small class="text-muted clickable" style="cursor:pointer;" onclick="setPreset(4096)">12MP(4k)</small>
        </div>
      </div>

      <!-- Result -->
      <div class="result-box">
        <span class="text-muted small d-block mb-1" data-i18n="result_label">单像素精度 / Precision</span>
        <div class="result-value"><span id="result">0.041</span> <span style="font-size:1rem">mm/px</span></div>
        <small class="text-white-50 mt-2 d-block" id="sub_result">
            <span data-i18n="inverse_label">等效于:</span> 
            <span id="inverse_val" class="text-white fw-bold">24.48</span> px/mm
        </small>
      </div>

    </div>
  </div>

  <script>
    // ===== 语言数据字典 =====
    const translations = {
      zh: {
        title: "精度/分辨率估算",
        subtitle: "Precision Estimator",
        label_fov: "视野宽度 (FOV Width, mm)",
        label_px: "图像宽度 (像素, px)",
        result_label: "计算精度 (Resolution)",
        inverse_label: "等效于:",
        lang_btn: "Switch to EN"
      },
      en: {
        title: "Precision Calculator",
        subtitle: "Resolution per Pixel",
        label_fov: "Field of View (FOV, mm)",
        label_px: "Image Width (Pixels)",
        result_label: "Physical Resolution",
        inverse_label: "Equivalent to:",
        lang_btn: "切换中文"
      }
    };

    let currentLang = 'zh';

    function toggleLang() {
      currentLang = currentLang === 'zh' ? 'en' : 'zh';
      updateUI();
    }

    function updateUI() {
      const t = translations[currentLang];
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.innerText = t[key];
      });
      document.getElementById('langBtn').innerText = t.lang_btn;
    }

    // 辅助函数：快速设置像素
    function setPreset(val) {
        document.getElementById('px').value = val;
        calculate();
    }

    // ===== 计算逻辑 =====
    function calculate() {
      const fov = parseFloat(document.getElementById('fov').value);
      const px = parseFloat(document.getElementById('px').value);

      if (fov && px && px > 0) {
        // 精度 = FOV / Pixel
        const res = fov / px;
        const inverse = px / fov;

        // 智能保留小数位
        let displayRes = res < 0.01 ? res.toFixed(4) : res.toFixed(3);
        
        document.getElementById('result').innerText = displayRes;
        document.getElementById('inverse_val').innerText = inverse.toFixed(2);
      } else {
        document.getElementById('result').innerText = "---";
        document.getElementById('inverse_val').innerText = "--";
      }
    }

    // 初始化
    calculate();
  </script>
</body>
</html>