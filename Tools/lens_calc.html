<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lens Calculator - 镜头焦距计算</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
  <style>
    /* ===== 赛博朋克主题样式 (内联) ===== */
    :root {
      --primary: #00f0ff;
      --secondary: #0066ff;
      --bg-dark: #0a0a1a;
      --card-bg: rgba(15, 25, 50, 0.85);
      --text: #e0e0e0;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg-dark);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .grid-bg {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: radial-gradient(var(--secondary) 1px, transparent 1px);
      background-size: 30px 30px;
      opacity: 0.1;
      z-index: -1;
    }
    
    /* 卡片容器 */
    .calc-container {
      background: var(--card-bg);
      border: 1px solid rgba(0, 240, 255, 0.3);
      border-radius: 16px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.8), 0 0 10px rgba(0, 240, 255, 0.1);
      width: 100%;
      max-width: 500px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    .calc-container::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px;
      background: linear-gradient(90deg, var(--secondary), var(--primary));
    }

    /* 头部 */
    .header {
      padding: 20px 25px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .back-btn {
      color: var(--text);
      text-decoration: none;
      font-size: 0.9rem;
      transition: 0.3s;
    }
    .back-btn:hover { color: var(--primary); }

    /* 表单 */
    .form-body { padding: 30px 25px; }
    .form-label { color: rgba(255,255,255,0.7); font-size: 0.9rem; }
    
    .form-control, .form-select {
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.2);
      color: #fff;
      border-radius: 8px;
    }
    .form-control:focus, .form-select:focus {
      background: rgba(0,0,0,0.6);
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(0, 240, 255, 0.2);
      color: #fff;
    }

    /* 结果显示 */
    .result-box {
      margin-top: 25px;
      background: rgba(0, 240, 255, 0.05);
      border: 1px dashed var(--primary);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }
    .result-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--primary);
      text-shadow: 0 0 15px var(--primary);
      font-family: 'Courier New', monospace;
    }

    /* 语言切换器 */
    .lang-switch {
      cursor: pointer;
      font-size: 0.85rem;
      padding: 4px 10px;
      border: 1px solid var(--secondary);
      border-radius: 20px;
      color: var(--secondary);
      transition: 0.3s;
    }
    .lang-switch:hover { background: var(--secondary); color: #fff; }
  </style>
</head>
<body>
  <div class="grid-bg"></div>

  <div class="calc-container">
    <!-- Header -->
    <div class="header">
      <div>
        <h5 class="m-0 fw-bold"><i class="fa-solid fa-camera me-2"></i><span data-i18n="title">镜头焦距计算</span></h5>
        <small class="text-muted" data-i18n="subtitle">Focal Length Calculator</small>
      </div>
      <div class="d-flex align-items-center gap-3">
        <span class="lang-switch" onclick="toggleLang()" id="langBtn">EN</span>
        <a href="../tools.html" class="back-btn"><i class="fa-solid fa-xmark fa-lg"></i></a>
      </div>
    </div>

    <!-- Body -->
    <div class="form-body">
      
      <!-- Sensor Size -->
      <div class="mb-3">
        <label class="form-label" data-i18n="label_sensor">传感器尺寸 (Sensor Size)</label>
        <select id="sensor" class="form-select mb-1" onchange="calculate()">
          <option value="3.2">1/4" (3.2mm width)</option>
          <option value="4.8">1/3" (4.8mm width)</option>
          <option value="6.4" selected>1/2" (6.4mm width)</option>
          <option value="7.2">1/1.8" (7.2mm width)</option>
          <option value="8.8">2/3" (8.8mm width)</option>
          <option value="12.8">1" (12.8mm width)</option>
          <option value="14.2">1.1" (14.2mm width)</option>
          <option value="17.3">4/3" (17.3mm width)</option>
        </select>
      </div>

      <!-- Working Distance -->
      <div class="mb-3">
        <label class="form-label" data-i18n="label_wd">工作距离 (Working Distance)</label>
        <div class="input-group">
          <input type="number" id="wd" class="form-control" placeholder="500" value="500" oninput="calculate()">
          <span class="input-group-text bg-secondary border-secondary text-white">mm</span>
        </div>
      </div>

      <!-- FOV -->
      <div class="mb-3">
        <label class="form-label" data-i18n="label_fov">视野宽度 (Field of View Width)</label>
        <div class="input-group">
          <input type="number" id="fov" class="form-control" placeholder="100" value="100" oninput="calculate()">
          <span class="input-group-text bg-secondary border-secondary text-white">mm</span>
        </div>
      </div>

      <!-- Result -->
      <div class="result-box">
        <span class="text-muted small d-block mb-1" data-i18n="result_label">建议焦距 / Focal Length</span>
        <div class="result-value"><span id="result">32.0</span> <span style="font-size:1rem">mm</span></div>
        <small class="text-white-50 mt-2 d-block" data-i18n="formula_hint">公式: f = (Sensor * WD) / FOV</small>
      </div>

    </div>
  </div>

  <script>
    // ===== 语言数据字典 =====
    const translations = {
      zh: {
        title: "镜头焦距计算",
        subtitle: "Focal Length Calculator",
        label_sensor: "传感器尺寸 (Sensor Size)",
        label_wd: "工作距离 (WD)",
        label_fov: "视野宽度 (FOV Width)",
        result_label: "理论焦距结果",
        formula_hint: "基于针孔相机模型估算",
        lang_btn: "Switch to EN"
      },
      en: {
        title: "Lens Focal Length",
        subtitle: "Calculator Tool",
        label_sensor: "Sensor Format",
        label_wd: "Working Distance (WD)",
        label_fov: "Field of View (FOV)",
        result_label: "Theoretical Focal Length",
        formula_hint: "Based on pinhole camera model",
        lang_btn: "切换中文"
      }
    };

    let currentLang = 'zh';

    function toggleLang() {
      currentLang = currentLang === 'zh' ? 'en' : 'zh';
      updateUI();
    }

    function updateUI() {
      const t = translations[currentLang];
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (t[key]) el.innerText = t[key];
      });
      document.getElementById('langBtn').innerText = t.lang_btn;
    }

    // ===== 计算逻辑 =====
    function calculate() {
      const sensorWidth = parseFloat(document.getElementById('sensor').value);
      const wd = parseFloat(document.getElementById('wd').value);
      const fov = parseFloat(document.getElementById('fov').value);

      if (wd && fov && fov > 0) {
        // 公式：f = (SensorWidth * WD) / (FOV + SensorWidth) 
        // 工业常用简化公式: f = (SensorWidth * WD) / FOV
        const f = (sensorWidth * wd) / fov;
        document.getElementById('result').innerText = f.toFixed(2);
      } else {
        document.getElementById('result').innerText = "---";
      }
    }

    // 初始化
    calculate();
  </script>
</body>
</html>