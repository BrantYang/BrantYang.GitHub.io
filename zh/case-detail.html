<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>机器视觉工程师 - 案例详情</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <div id="navbar-placeholder"></div>

  <header class="page-header">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
        <div>
          <h1 class="h2 mb-1"><i class="fa-solid fa-file-lines text-primary"></i> <span id="case-title">案例详情</span></h1>
          <p class="text-muted mb-0" id="case-subtitle">—</p>
        </div>
        <a class="btn btn-outline-secondary" href="solutions.html"><i class="fa-solid fa-arrow-left"></i> 返回案例列表</a>
      </div>
    </div>
  </header>

  <main class="container my-5">
    <div class="row g-4">
      <div class="col-lg-7">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">项目概述</h5>
            <p class="text-muted mb-0" id="case-overview">—</p>
          </div>
        </div>

        <div class="card mt-4">
          <div class="card-body">
            <h5 class="card-title">挑战</h5>
            <ul class="mb-0" id="case-challenges"></ul>
          </div>
        </div>

        <div class="card mt-4">
          <div class="card-body">
            <h5 class="card-title">方案与落地</h5>
            <ul class="mb-0" id="case-approach"></ul>
          </div>
        </div>

        <div class="card mt-4">
          <div class="card-body">
            <h5 class="card-title">效果</h5>
            <ul class="mb-0" id="case-results"></ul>
          </div>
        </div>
      </div>

      <div class="col-lg-5">
        <div class="card shadow-sm">
          <img id="case-image" src="../assets/images/solutions/wafer.svg" class="card-img-top" alt="case" />
          <div class="card-body">
            <h5 class="card-title">技术关键词</h5>
            <div class="d-flex flex-wrap gap-2" id="case-tags"></div>

            <hr />

            <h6 class="text-muted">适用行业</h6>
            <div class="d-flex flex-wrap gap-2" id="case-domains"></div>

            <hr />

            <div class="alert alert-light border mb-0">
              想复用这类方案到你的产线？
              <a href="about.html">联系我</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/main.js"></script>
  <script>
    (function () {
      const cases = {
        wafer: {
          title: '晶圆表面缺陷检测',
          subtitle: '微小划痕/异物的稳定检出与误检控制',
          image: '../assets/images/solutions/wafer.svg',
          overview: '面向半导体产线的外观缺陷检测任务，要求在复杂纹理与噪声背景下稳定检出微小缺陷，并满足节拍与可维护性。',
          challenges: ['缺陷尺度小、形态多样', '背景纹理复杂，传统阈值/滤波不稳定', '误检成本高，需要可解释的复核机制'],
          approach: ['数据闭环：采集-标注-验证与难例挖掘', '模型训练与部署：YOLO/分割思路 + 工业化推理', '与传统算法结合：ROI约束、几何规则、结果可信度'],
          results: ['稳定检出微小划痕/异物', '误检率降低（可通过规则/二次判定进一步优化）', '部署流程可复用到同类外观检测工位'],
          tags: ['YOLO', 'OpenCV', '工业部署', '难例挖掘'],
          domains: ['半导体']
        },
        threec: {
          title: '3C外观缺陷检测',
          subtitle: '复杂反光背景下的检测与误检控制',
          image: '../assets/images/solutions/wafer.svg',
          overview: '针对高反光/高纹理的3C外观件，建立稳定的检测与质量判定策略。',
          challenges: ['高反光导致亮斑/阴影变化大', '样本差异与工艺波动', '节拍要求与部署维护成本'],
          approach: ['光学与成像协同：角度/偏振/曝光策略', '算法：传统规则 + 深度学习融合', '工程：参数配置化与可视化诊断'],
          results: ['在工艺波动下保持较稳定效果', '降低人工复判压力', '方案可复制到同类外观任务'],
          tags: ['成像优化', '传统+AI', '诊断工具'],
          domains: ['3C电子']
        },
        assembly: {
          title: '装配定位与测量',
          subtitle: '高精度定位、尺寸测量与节拍优化',
          image: '../assets/images/solutions/wafer.svg',
          overview: '面向装配工位的定位与测量任务，强调精度、稳定性和节拍。',
          challenges: ['公差紧、定位精度要求高', '夹具/振动/光照带来的扰动', '测量链路需要可追溯'],
          approach: ['Halcon/OpenCV：亚像素定位与几何拟合', '标定：相机-镜头-工装标定流程', '工程化：日志、阈值、结果追溯'],
          results: ['满足装配定位精度需求', '测量结果可追溯', '与产线节拍兼容'],
          tags: ['Halcon', '亚像素', '标定', '测量'],
          domains: ['汽车制造']
        },
        battery: {
          title: '电池/模组检测',
          subtitle: '外观 + 尺寸 + 标识的一体化检测',
          image: '../assets/images/solutions/wafer.svg',
          overview: '在新能源产线中，将外观、尺寸与标识读码融合，减少设备与工位数量。',
          challenges: ['检测项多、流程复杂', '不同相机/光源的一致性', '系统集成与维护成本'],
          approach: ['架构：多相机/多任务统一调度', '算法：外观缺陷 + 几何测量 + OCR/读码', '工程：异常可视化与快速定位'],
          results: ['减少工位拆分，提升整体效率', '降低维护成本', '提升产线异常定位速度'],
          tags: ['多任务', 'OCR', '系统集成'],
          domains: ['新能源']
        }
      };

      const params = new URLSearchParams(window.location.search);
      const id = params.get('id') || 'wafer';
      const data = cases[id] || cases.wafer;

      const setText = (id, value) => {
        const el = document.getElementById(id);
        if (el) el.textContent = value;
      };

      const setList = (id, items) => {
        const el = document.getElementById(id);
        if (!el) return;
        el.innerHTML = '';
        items.forEach((t) => {
          const li = document.createElement('li');
          li.textContent = t;
          el.appendChild(li);
        });
      };

      const setBadges = (id, items, cls) => {
        const el = document.getElementById(id);
        if (!el) return;
        el.innerHTML = '';
        items.forEach((t) => {
          const span = document.createElement('span');
          span.className = cls;
          span.textContent = t;
          el.appendChild(span);
        });
      };

      setText('case-title', data.title);
      setText('case-subtitle', data.subtitle);
      setText('case-overview', data.overview);
      setList('case-challenges', data.challenges);
      setList('case-approach', data.approach);
      setList('case-results', data.results);

      const img = document.getElementById('case-image');
      if (img) img.src = data.image;

      setBadges('case-tags', data.tags, 'badge text-bg-primary');
      setBadges('case-domains', data.domains, 'badge rounded-pill text-bg-dark');

      document.title = `机器视觉工程师 - ${data.title}`;
    })();
  </script>
</body>
</html>
